{
  "name": "backend-template",
  "version": "0.0.1",
  "templateVersion": "1.7.2",
  "description": "A template for backend",
  "main": "./lambda.js",
  "type": "commonjs",
  "config": {
    "s3BucketName": "backend-template-bucket",
    "region": "us-east-1",
    "cloudFormationStackName": "backend-template-stack",
    "functionName": "",
    "domain": "",
    "commitizen": {
      "path": "./node_modules/commitizen-emoji"
    },
    "commitizenEmoji": {
      "conventionalFormat": true
    }
  },
  "engines": {
    "node": ">=20.x.x <=21.x.x",
    "yarn": "not allowed in this project",
    "npm": ">=10.0.0"
  },
  "scripts": {
    "prepare": "husky install",
    "dev": "cross-env DEBUG=http NODE_ENV=development ts-node-dev -r tsconfig-paths/register --inspect --transpile-only --ignore-watch node_modules src/singlethread",
    "typeorm": "ts-node-dev -r tsconfig-paths/register ./node_modules/typeorm/cli.js",
    "staging:migration:generate": "cross-env NODE_ENV=staging ts-node-dev -r tsconfig-paths/register ./node_modules/typeorm/cli.js migration:generate -d src/database/index.ts src/database/migrations/staging/staging",
    "migration:generate": "cross-env NODE_ENV=development ts-node-dev -r tsconfig-paths/register ./node_modules/typeorm/cli.js migration:generate -d src/database/index.ts",
    "dev:migration:run": "cross-env NODE_ENV=development ts-node-dev -r tsconfig-paths/register ./node_modules/typeorm/cli.js migration:run -d src/database/index.ts",
    "prod:migration:run": "cross-env NODE_ENV=production ts-node-dev -r tsconfig-paths/register ./node_modules/typeorm/cli.js migration:run -d dist/database/index.js",
    "migration:revert": "cross-env NODE_ENV=development ts-node-dev -r tsconfig-paths/register ./node_modules/typeorm/cli.js migration:revert -d src/database/index.ts",
    "prod": "cross-env DEBUG=http NODE_ENV=production node dist/multithread",
    "build": "tsc --project tsconfig.build.json && tsc-alias -p tsconfig.build.json",
    "postbuild": "npm pkg set scripts.prepare='true' && cp -R src/views dist/ && cp package*json dist/ && cp -R src/assets dist/ && cp -R src/environments dist/ && cp -R logs dist/ && npm pkg set scripts.prepare='husky install'",
    "test": "cross-env NODE_ENV=staging jest --watch --detectOpenHandles",
    "test:coverage": "cross-env NODE_ENV=staging jest --coverage",
    "prettier:format": "prettier --write .",
    "lint": "eslint ./src/ --ext .ts",
    "lint:fix": "eslint --fix ./src/ --ext .ts",
    "type-check": "tsc -p tsconfig.build.json --noEmit --pretty",
    "create-bucket": "cross-var aws s3 mb s3://$npm_package_config_s3BucketName --region $npm_package_config_region",
    "delete-bucket": "cross-var aws s3 rb s3://$npm_package_config_s3BucketName --region $npm_package_config_region",
    "delete-stack": "cross-var aws cloudformation delete-stack --stack-name $npm_package_config_cloudFormationStackName --region $npm_package_config_region",
    "invoke-lambda": "cross-var aws lambda invoke --function-name $npm_package_config_functionName --region $npm_package_config_region --cli-binary-format raw-in-base64-out --payload file://api-gateway-event.json lambda-invoke-response.json && cat lambda-invoke-response.json",
    "local": "ts-node-dev -r tsconfig-paths/register --inspect --transpile-only --ignore-watch node_modules src/scripts/local",
    "sam:build": "sam build --template ./sam-template.yaml",
    "sam:deploy": "cross-var sam deploy --stack-name $npm_package_config_cloudFormationStackName --capabilities CAPABILITY_IAM --s3-bucket $npm_package_config_s3BucketName --s3-prefix $npm_package_name --parameter-overrides ParameterKey=DomainName,ParameterValue=$npm_package_config_domain --region $npm_package_config_region --no-fail-on-empty-changeset",
    "package-deploy": "npm run build && npm run sam:build && npm run sam:deploy",
    "setup": "npm install && (cross-var aws s3api get-bucket-location --bucket $npm_package_config_s3BucketName --region $npm_package_config_region || npm run create-bucket) && npm run package-deploy && npm run advise"
  },
  "license": "Apache-2.0",
  "dependencies": {
    "@aws-sdk/client-cloudfront": "^3.582.0",
    "@aws-sdk/client-s3": "3.587.0",
    "@vendia/serverless-express": "4.12.6",
    "axios": "1.7.2",
    "bcryptjs": "2.4.3",
    "body-parser": "1.20.2",
    "celebrate": "15.0.3",
    "class-validator": "0.14.1",
    "compression": "1.7.4",
    "config": "3.3.11",
    "cors": "2.8.5",
    "cross-env": "7.0.3",
    "dayjs": "1.11.11",
    "dotenv": "16.4.5",
    "ejs": "3.1.10",
    "escape-html": "1.0.3",
    "express": "4.19.2",
    "express-async-errors": "3.1.1",
    "express-fileupload": "1.5.0",
    "jsonwebtoken": "9.0.2",
    "mime-types": "^2.1.35",
    "mysql2": "3.10.0",
    "node-cache": "5.1.2",
    "reflect-metadata": "0.2.2",
    "sharp": "^0.33.4",
    "source-map-support": "0.5.21",
    "sqlite3": "^5.1.6",
    "tslib": "2.6.2",
    "typeorm": "0.3.20",
    "uuid": "^9.0.1",
    "winston": "3.13.0",
    "winston-loki": "6.1.2"
  },
  "devDependencies": {
    "@faker-js/faker": "8.4.1",
    "@types/aws-lambda": "8.10.138",
    "@types/bcryptjs": "2.4.6",
    "@types/compression": "1.7.5",
    "@types/config": "3.3.4",
    "@types/cors": "2.8.17",
    "@types/ejs": "3.1.5",
    "@types/escape-html": "1.0.4",
    "@types/express": "4.17.21",
    "@types/express-fileupload": "1.5.0",
    "@types/jest": "29.5.12",
    "@types/jsonwebtoken": "9.0.6",
    "@types/mime-types": "^2.1.4",
    "@types/node": "20.12.13",
    "@types/supertest": "6.0.2",
    "@types/uuid": "^9.0.8",
    "@types/validator": "13.11.10",
    "@typescript-eslint/eslint-plugin": "7.11.0",
    "@typescript-eslint/parser": "7.11.0",
    "aws-lambda": "1.0.7",
    "babel-plugin-module-resolver": "5.0.2",
    "babel-plugin-transform-typescript-metadata": "0.3.2",
    "commitizen": "4.3.0",
    "commitizen-emoji": "1.0.5",
    "cross-var": "1.1.0",
    "eslint": "9.5.0",
    "eslint-config-airbnb-base": "15.0.0",
    "eslint-config-airbnb-typescript": "18.0.0",
    "eslint-config-prettier": "9.1.0",
    "eslint-plugin-import": "2.29.1",
    "eslint-plugin-jest": "28.5.0",
    "eslint-plugin-prettier": "5.1.3",
    "husky": "9.0.11",
    "jest": "29.7.0",
    "lint-staged": "15.2.5",
    "prettier": "3.2.5",
    "supertest": "7.0.0",
    "ts-jest": "29.1.4",
    "ts-node": "10.9.2",
    "ts-node-dev": "2.0.0",
    "tsc-alias": "1.8.10",
    "tsconfig-paths": "4.2.0",
    "typescript": "5.4.5"
  }
}
